Last-Update: 2014-02-13
Forwarded: not-needed
Author: Christoph Haas <haas@debian.org>
Reviewed-By: Dmitry Smirnov <onlyjob@member.fsf.org>
Description: Change default paths and settings in config files specifically for Debian

Index: dotdeb-zabbix/conf/zabbix_agentd.conf
===================================================================
--- dotdeb-zabbix.orig/conf/zabbix_agentd.conf
+++ dotdeb-zabbix/conf/zabbix_agentd.conf
@@ -10,6 +10,8 @@
 # Default:
 # PidFile=/tmp/zabbix_agentd.pid
 
+PidFile=/var/run/zabbix/zabbix_agentd.pid
+
 ### Option: LogFile
 #	Name of log file.
 #	If not set, syslog is used.
@@ -18,7 +20,7 @@
 # Default:
 # LogFile=
 
-LogFile=/tmp/zabbix_agentd.log
+LogFile=/var/log/zabbix-agent/zabbix_agentd.log
 
 ### Option: LogFileSize
 #	Maximum size of log file in MB.
@@ -29,6 +31,8 @@ LogFile=/tmp/zabbix_agentd.log
 # Default:
 # LogFileSize=1
 
+LogFileSize=0
+
 ### Option: DebugLevel
 #	Specifies debug level
 #	0 - no debug
@@ -233,14 +237,15 @@ Hostname=Zabbix server
 
 ### Option: Include
 #	You may include individual files or all files in a directory in the configuration file.
-#	Installing Zabbix will create include directory in /usr/local/etc, unless modified during the compile time.
+#	Installing Zabbix will create include directory in /etc/zabbix, unless modified during the compile time.
 #
 # Mandatory: no
 # Default:
 # Include=
 
-# Include=/usr/local/etc/zabbix_agentd.userparams.conf
-# Include=/usr/local/etc/zabbix_agentd.conf.d/
+# Include=/etc/zabbix/zabbix_agentd.userparams.conf
+# Include=/etc/zabbix/zabbix_agentd.conf.d/
+Include=/etc/zabbix/zabbix_agentd.conf.d/
 
 ####### USER-DEFINED MONITORED PARAMETERS #######
 
Index: dotdeb-zabbix/conf/zabbix_proxy.conf
===================================================================
--- dotdeb-zabbix.orig/conf/zabbix_proxy.conf
+++ dotdeb-zabbix/conf/zabbix_proxy.conf
@@ -74,7 +74,7 @@ Hostname=Zabbix proxy
 # Default:
 # LogFile=
 
-LogFile=/tmp/zabbix_proxy.log
+LogFile=/var/log/zabbix-proxy/zabbix_proxy.log
 
 ### Option: LogFileSize
 #	Maximum size of log file in MB.
@@ -104,6 +104,7 @@ LogFile=/tmp/zabbix_proxy.log
 # Mandatory: no
 # Default:
 # PidFile=/tmp/zabbix_proxy.pid
+PidFile=/var/run/zabbix/zabbix_proxy.pid
 
 ### Option: DBHost
 #	Database host name.
@@ -138,7 +139,7 @@ DBName=zabbix_proxy
 # Default:
 # DBUser=
 
-DBUser=root
+DBUser=zabbix
 
 ### Option: DBPassword
 #	Database password. Ignored for SQLite.
@@ -470,6 +471,7 @@ DBUser=root
 # Mandatory: no
 # Default:
 # FpingLocation=/usr/sbin/fping
+FpingLocation=/usr/bin/fping
 
 ### Option: Fping6Location
 #	Location of fping6.
@@ -479,6 +481,7 @@ DBUser=root
 # Mandatory: no
 # Default:
 # Fping6Location=/usr/sbin/fping6
+Fping6Location=/usr/bin/fping6
 
 ### Option: SSHKeyLocation
 #	Location of public and private keys for SSH checks and actions.
@@ -516,14 +519,15 @@ DBUser=root
 
 ### Option: Include
 #	You may include individual files or all files in a directory in the configuration file.
-#	Installing Zabbix will create include directory in /usr/local/etc, unless modified during the compile time.
+#	Installing Zabbix will create include directory in /etc/zabbix, unless modified during the compile time.
+
 #
 # Mandatory: no
 # Default:
 # Include=
 
-# Include=/usr/local/etc/zabbix_proxy.general.conf
-# Include=/usr/local/etc/zabbix_proxy.conf.d/
+# Include=/etc/zabbix/zabbix_proxy.general.conf
+# Include=/etc/zabbix/zabbix_proxy.conf.d/
 
 ####### LOADABLE MODULES #######
 
Index: dotdeb-zabbix/conf/zabbix_server.conf
===================================================================
--- dotdeb-zabbix.orig/conf/zabbix_server.conf
+++ dotdeb-zabbix/conf/zabbix_server.conf
@@ -36,7 +36,7 @@
 # Default:
 # LogFile=
 
-LogFile=/tmp/zabbix_server.log
+LogFile=/var/log/zabbix-server/zabbix_server.log
 
 ### Option: LogFileSize
 #	Maximum size of log file in MB.
@@ -67,6 +67,8 @@ LogFile=/tmp/zabbix_server.log
 # Default:
 # PidFile=/tmp/zabbix_server.pid
 
+PidFile=/var/run/zabbix/zabbix_server.pid
+
 ### Option: DBHost
 #	Database host name.
 #	If set to localhost, socket is used for MySQL.
@@ -79,6 +81,8 @@ LogFile=/tmp/zabbix_server.log
 ### Option: DBName
 #	Database name.
 #	For SQLite3 path to database file must be provided. DBUser and DBPassword are ignored.
+#	Sample SQLite3 DBName:
+#				DBName=/var/lib/zabbix/zabbix.sqlite3
 #
 # Mandatory: yes
 # Default:
@@ -100,7 +104,7 @@ DBName=zabbix
 # Default:
 # DBUser=
 
-DBUser=root
+DBUser=zabbix
 
 ### Option: DBPassword
 #	Database password. Ignored for SQLite.
@@ -457,6 +461,8 @@ DBUser=root
 # Default:
 # AlertScriptsPath=${datadir}/zabbix/alertscripts
 
+AlertScriptsPath=/etc/zabbix/alert.d/
+
 ### Option: ExternalScripts
 #	Full path to location of external scripts.
 #	Default depends on compilation options.
@@ -471,7 +477,9 @@ DBUser=root
 #
 # Mandatory: no
 # Default:
-# FpingLocation=/usr/sbin/fping
+# FpingLocation=/usr/bin/fping
+
+FpingLocation=/usr/bin/fping
 
 ### Option: Fping6Location
 #	Location of fping6.
@@ -480,7 +488,7 @@ DBUser=root
 #
 # Mandatory: no
 # Default:
-# Fping6Location=/usr/sbin/fping6
+# Fping6Location=/usr/bin/fping6
 
 ### Option: SSHKeyLocation
 #	Location of public and private keys for SSH checks and actions.
@@ -544,14 +552,13 @@ DBUser=root
 
 ### Option: Include
 #	You may include individual files or all files in a directory in the configuration file.
-#	Installing Zabbix will create include directory in /usr/local/etc, unless modified during the compile time.
 #
 # Mandatory: no
 # Default:
 # Include=
 
-# Include=/usr/local/etc/zabbix_server.general.conf
-# Include=/usr/local/etc/zabbix_server.conf.d/
+# Include=/etc/zabbix/zabbix_server.general.conf
+# Include=/etc/zabbix/zabbix_server.conf.d/
 
 ####### LOADABLE MODULES #######
 
Index: dotdeb-zabbix/frontends/php/conf/zabbix.conf.php.example
===================================================================
--- dotdeb-zabbix.orig/frontends/php/conf/zabbix.conf.php.example
+++ dotdeb-zabbix/frontends/php/conf/zabbix.conf.php.example
@@ -2,16 +2,19 @@
 // Zabbix GUI configuration file
 global $DB;
 
-$DB["TYPE"]				= 'MYSQL';
+// Valid types are MYSQL, SQLITE3 or POSTGRESQL
+$DB["TYPE"]			= 'MYSQL';
 $DB["SERVER"]			= 'localhost';
-$DB["PORT"]				= '0';
+$DB["PORT"]			= '0';
+
+// SQLITE3 use full path to file/database: $DB["DATABASE"] = '/var/lib/zabbix/zabbix.sqlite3';
 $DB["DATABASE"]			= 'zabbix';
-$DB["USER"]				= 'zabbix';
+$DB["USER"]			= 'zabbix';
 $DB["PASSWORD"]			= 'zabbix_password';
 // SCHEMA is relevant only for IBM_DB2 database
 $DB["SCHEMA"]			= '';
 
-$ZBX_SERVER				= 'localhost';
+$ZBX_SERVER			= 'localhost';
 $ZBX_SERVER_PORT		= '10051';
 $ZBX_SERVER_NAME		= '';
 
